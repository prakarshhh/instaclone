<% include ./partials/header.ejs %>
<div class="w-full min-h-screen bg-[#f0f0f0] text-gray-900 py-8">
  <!-- Navigation -->
  <div class="nav flex justify-between items-center px-6">
      <h3 class="text-2xl font-bold text-gray-800"><%= user.username %></h3>
      <div class="icons flex gap-6">
          <a href="/upload" class="text-blue-600 hover:text-blue-700 text-xl">
              <i class="ri-add-box-line"></i>
          </a>
          <i class="ri-menu-line text-gray-700 text-xl hover:text-gray-800"></i>
      </div>
  </div>
  
  <!-- Profile and Stats -->
  <div class="flex flex-col items-center mt-8">
      <div class="profile-image w-36 h-36 bg-white rounded-full border-4 border-gray-300 shadow-lg overflow-hidden">
          <img class="w-full h-full object-cover" src="/images/uploads/<%= user.picture %>" alt="<%= user.username %>">
      </div>
      <div class="stats flex gap-12 mt-6">
          <div class="flex flex-col items-center">
              <h3 class="text-3xl font-bold"><%= user.posts.length %></h3>
              <h4 class="text-gray-600">Posts</h4>
          </div>
          <div class="flex flex-col items-center">
              <h3 class="text-3xl font-bold"><%= user.followers.length %></h3>
              <h4 class="text-gray-600">Followers</h4>
          </div>
          <div class="flex flex-col items-center">
              <h3 class="text-3xl font-bold"><%= user.following.length %></h3>
              <h4 class="text-gray-600">Following</h4>
          </div>
      </div>
  </div>
  
  <!-- User Details -->
  <div class="dets px-6 mt-8 text-center">
      <h3 class="text-2xl font-semibold mb-2"><%= user.name %></h3>
      <p class="text-sm text-gray-700 max-w-md mx-auto">
          <%= user.bio ?? "You have not set anything yet, (click edit profile to set)" %>
      </p>
  </div>
  
  <!-- Edit Profile Button -->
  <div class="px-6 mt-6 flex justify-center">
      <a class="px-6 py-2 bg-blue-600 text-white text-sm rounded-lg shadow-md hover:bg-blue-700" href="/edit">Edit Profile</a>
  </div>
  
  <!-- User Posts -->
  <div class="posts w-full flex gap-4 py-4 mt-6 flex-wrap">
      <% if(user.posts.length > 0){ %>
          <% user.posts.reverse().forEach(function(post){ %>
              <div class="post w-1/3 h-48 bg-white border-2 border-gray-200 rounded-lg shadow-md overflow-hidden">
                  <img class="w-full h-full object-cover" src="/images/uploads/<%= post.picture %>" alt="Post Image">
              </div>
          <% }) %>
      <% } else { %>
          <div class="w-full flex justify-center items-center min-h-[20vh]">
              <small class="text-gray-600 opacity-60">No posts yet.</small>
          </div>
      <% } %>
  </div>
</div>


<% include ./partials/footer.ejs %>