<% include ./partials/header.ejs %>

<form hidden id="fileform" method="post" enctype="multipart/form-data" action="/upload">
  <input id="file" type="file" name="image">
</form>
  
<div class="w-full min-h-screen bg-[#f0f0f0] text-gray-900 py-8">
    <!-- Navigation -->
    <div class="flex justify-between items-center px-6">
      <a class="text-blue-600 hover:text-blue-700 text-sm flex items-center gap-1" href="/profile">
        <i class="ri-arrow-left-s-line text-xl"></i> profile
      </a>
      <h2 class="text-lg font-semibold">Edit Profile</h2>
      <a class="text-gray-600 hover:text-gray-800 text-sm flex items-center gap-1" href="/feed">
        <i class="ri-home-line text-xl"></i> home
      </a>
    </div>
    
    <!-- Profile Picture and Edit Button -->
    <div class="flex flex-col items-center gap-4 mt-12">
      <div class="image w-32 h-32 bg-sky-100 rounded-full overflow-hidden border-2 border-gray-300 shadow-md">
        <img class="w-full h-full object-cover" src="/images/uploads/<%= user.picture %>" alt="Profile Picture">
      </div>
      <button id="editbtn" class="bg-blue-600 text-white px-4 py-2 rounded-md shadow-md hover:bg-blue-700 capitalize">
        Edit Picture
      </button>
    </div>
    
    <!-- Edit Account Details -->
    <div class="gap-5 px-6 mt-12">
      <h3 class="text-xl font-semibold leading-none">Edit Account Details</h3>
      <hr class="opacity-40 my-4">
      <form class="w-full bg-white p-6 rounded-lg shadow-lg" action="/update" method="post">
        <input class="w-full px-4 py-3 mb-4 border-2 border-gray-300 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500" type="text" placeholder="Username" name="username" value="<%= user.username %>">
        <input class="w-full px-4 py-3 mb-4 border-2 border-gray-300 rounded-md bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500" type="text" placeholder="Name" name="name" value="<%= user.name %>">
        <textarea class="w-full px-4 py-3 mb-4 border-2 border-gray-300 rounded-md bg-gray-100 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Bio" name="bio"><%= user.bio %></textarea>
        <input class="w-full bg-blue-600 text-white px-4 py-3 rounded-md cursor-pointer shadow-md hover:bg-blue-700" type="submit" value="Update Details">
      </form>
    </div>
</div>

  </div>

  <script>
    document.querySelector("#editbtn").addEventListener("click", function(){
      document.querySelector("#file").click();
    })

    document.querySelector("#file")
    .addEventListener("change", function(){
      document.querySelector("#fileform").submit();
    });
  </script>
<% include ./partials/footer.ejs %>